---
import Day from "./Day.astro";

const meses = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
const diasSemana = ["LUN","MAR","MIE","JUE","VIE","SAB","DOM",];

let today = new Date();
let currentYear = today.getFullYear();
console.log('Año actual',currentYear);
let currentMonth = today.getMonth() + 1;
console.log('Mes actual',currentMonth);
const daysInMonth = new Date(currentYear, currentMonth, 0).getDate();
const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);

currentMonth = today.getMonth();
const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
const startColumn = firstDayOfMonth === 0 ? 7 : firstDayOfMonth;
let estilos = days.map((dayNumber, index) => (
      (index === 0 ? `grid-column-start: ${startColumn}` : "")
      +
      ( dayNumber === today.getDay() ? "color: var(--azul)" : "")
));

---
<header class="calendar_header">
  <div class="buttonsMonth">
    <button class="anterior">
      <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-caret-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 6l-6 6l6 6v-12" /></svg>
    </button>
    <button class="siguiente">
      <svg  xmlns="http://www.w3.org/2000/svg"  width="28"  height="28"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-caret-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 18l6 -6l-6 -6v12" /></svg>
    </button>
  </div>
  <div class="header_text">
    <p class="nombre_mes">{meses[currentMonth]}</p>
    <p class="año">{currentYear}</p>
  </div>
</header>
<section>
  {diasSemana.map( (dia) =>(
    <div class="diaSemana">{dia}</div>
  ))}
  {days.map((dayNumber, index) => (
    <Day dayNumber={dayNumber} 
      style={index === 0 ? `grid-column-start: ${startColumn}` : ""}
      />
  ))}
</section>

<style>
  aside{
    padding: 1rem;
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    align-items: center;
  }
  section{
    padding: 3rem;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: .8rem;
    justify-items: center;
  }
  .diaSemana{
    background-color: var(--gris-oscuro);
    padding: .5rem 1rem;
    border-radius: 15px;
    font-weight: 600;
    font-size: .8rem;
  }
  .calendar_header{
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 2rem;
  }
  .header_text{
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 1rem;
  }
  .nombre_mes{
    font-weight: 600;
    font-size: 2.5rem;
  }
  .año{
    color: var(--gris);
    font-size: 2rem;
  }
  .buttonsMonth{
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: .3rem;
  }
  .buttonsMonth > button{
    border:1px solid var(--gris-oscuro);
    color: var(--blanco);
    border-radius: 100%;
    background-color: var(--gris-oscuro);
    border: none;
    cursor: pointer;
    padding: .3rem;
  }
  .buttonsMonth > button:hover{
    background-color: var(--blanco);
    color: var(--negro);
  }
  .buttonsMonth > button > svg{
    width: 2.3rem;
    height: 2.3rem;
  }
</style>
